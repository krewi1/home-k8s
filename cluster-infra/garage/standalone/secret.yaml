---
# Garage configuration with RPC secret
# IMPORTANT: Change the rpc_secret after first deployment!
apiVersion: v1
kind: Secret
metadata:
  name: garage-config
  namespace: garage
type: Opaque
stringData:
  garage.toml: |
    metadata_dir = "/data/meta"
    data_dir = "/data/data"
    db_engine = "sqlite"

    replication_mode = "none"

    compression_level = 1

    rpc_bind_addr = "[::]:3901"
    rpc_public_addr = "127.0.0.1:3901"
    rpc_secret = change-this

    [s3_api]
    s3_region = "garage"
    api_bind_addr = "[::]:3900"
    root_domain = ".s3.garage.home"

    [s3_web]
    bind_addr = "[::]:3902"
    root_domain = ".web.garage.home"

    [admin]
    api_bind_addr = "[::]:3903"
